<idea-plugin>
    <id>com.pinescript.plugin</id>
    <name>Pine Script</name>
    <vendor email="support@pinescript.org" url="https://www.pinescript.org">Pine Script</vendor>
    
    <description><![CDATA[
        <p>Pine Script language support for JetBrains IDEs.</p>
        <p>Features:</p>
        <ul>
            <li>Syntax highlighting for Pine Script files (.pine, .ps, .pinescript)</li>
            <li>Code completion for built-in functions, variables, and methods</li>
            <li>Color preview in editor</li>
            <li>Parameter information and documentation</li>
        </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File type and language -->
        <fileType name="Pine Script" implementationClass="com.pinescript.plugin.language.PineScriptFileType" 
                  fieldName="INSTANCE" language="Pine Script" extensions="pine;ps;pinescript"/>
        <lang.parserDefinition language="Pine Script" 
                               implementationClass="com.pinescript.plugin.language.PineScriptParserDefinition"/>

        <!-- Syntax highlighting -->
        <lang.syntaxHighlighter language="Pine Script" 
                                implementationClass="com.pinescript.plugin.editor.PineScriptSyntaxHighlighter"/>
        <colorSettingsPage implementation="com.pinescript.plugin.editor.PineScriptColorSettingsPage"/>
        
        <!-- Code completion -->
        <completion.contributor language="Pine Script"
                                implementationClass="com.pinescript.plugin.completion.PineScriptCompletionContributor"/>
                                
        <!-- Documentation -->
        <lang.documentationProvider language="Pine Script"
                                     implementationClass="com.pinescript.plugin.doc.PineScriptDocumentationProvider"/>
                                     
        <!-- Parameter info -->
        <lang.parameterInfoHandler language="Pine Script"
                                   implementationClass="com.pinescript.plugin.editor.PineScriptParameterInfoHandler"/>
                                   
        <!-- Color provider -->
        <colorProvider implementation="com.pinescript.plugin.editor.PineScriptColorProvider"/>
        
        <!-- Annotation -->
        <annotator language="Pine Script" 
                   implementationClass="com.pinescript.plugin.annotator.PineScriptAnnotator"/>

        <!-- Prevent TypeScript from handling our files -->
        <fileTypeOverrider implementation="com.pinescript.plugin.language.PineScriptFileTypeOverrider"/>
    </extensions>
    
    <actions>
        <!-- Add your actions here -->
        <action id="PineScript.NewFile" class="com.pinescript.plugin.actions.NewPineScriptFileAction" 
                text="Pine Script File" description="Create new Pine Script file">
            <add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFile"/>
        </action>
    </actions>
</idea-plugin> 